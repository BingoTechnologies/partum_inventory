{% extends 'base.html' %}
{% block menu_product %}active{% endblock %}
{% block submenu_list_items %}active{% endblock %}
{% block content %}
    <div class="col-md-6">
        <br>
        <a href="{% url 'product:item_details' pk=product.id %}"><button type="button" class="btn btn-primary" style="float: left">Back to Product Item List</button></a>
        <br><br><br>
        <div class="content-panel">
            <h3 class="text-center">{{ request.user.retailer_user.retailer.name }} | Product ({{ product.name }})</h3>
            <div class="panel-body">
                <form class="form-horizontal" action="{% url 'product:add_product_items' product_id=product.id %}" method="post" >
                    <div class="form-group">
                        <div class="col-sm-12">
                            {% csrf_token %}
                            <span class="retail-error" style="color:red; display:none">This field is required..</span>
                            <input type="text" class="form-control retail_price" name="retail_price" onkeyup="checkDec(this);" placeholder="Retail Price"><br>
                            <span class="consumer-error" style="color:red; display:none">This field is required..</span>
                            <input type="text" class="form-control consumer_price" name="consumer_price" onkeyup="checkDec(this);" placeholder="Consumer Price"><br>
                            <span class="item-error" style="color:red; display:none">This field is required..</span>
                            <input type="text"  class="form-control Quantity_item"  name="available_item"  onkeyup="checkDec(this);" placeholder="Item Quantity"><br>
                            <input type="hidden" name="product" value="{{ product.id }}">
                            <button type="button" class="btn btn-primary product-sub-btn" style="float: right">Save Product</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

<script>

    $(document).ready(function(){
    $(".product-sub-btn").on ('click', function(){
            var error= false;

        if($('.retail_price').val () == ""){
            $('.retail-error').show();
            error= true;
        }
            else {
            $('.retail-error').hide();
        }
        if ($('.consumer_price').val() == ""){
            $('.consumer-error').show();
            error = true;
        }
        else {
            $('.consumer-error').hide();
        }
        if ($('.Quantity_item').val () == ""){
            $('.item-error').show();
            error = true;
        }
        else {
            $('.item-error').hide();
        }
        if (error == true) {
         return;
        }

    });
    });

        $('.retail_price').keyup (function(){
        $('.retail-error').hide();
        });
        function checkDec(el){
        var ex = /^[0-9]+\.?[0-9]*$/;
        if(ex.test(el.value)==false){
        el.value = el.value.substring(0,el.value.length - 1);
        }
        }
        $('.consumer_price').keyup (function(){
        $('.consumer-error').hide();
        });
        function checkDec(el){
        var ex = /^[0-9]+\.?[0-9]*$/;
        if(ex.test(el.value)==false){
        el.value = el.value.substring(0,el.value.length - 1);
        }
        }
        $('.Quantity_item').keyup (function(){
        $('.item-error').hide();
        });
        function checkDec(el){
        var ex = /^[0-9]+\.?[0-9]*$/;
        if(ex.test(el.value)==false){
        el.value = el.value.substring(0,el.value.length - 1);
        }
        }



    // Allow only 1 decimal point

</script>






{% endblock %}